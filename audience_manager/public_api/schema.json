{"swagger": "2.0", "info": {"title": "Public API Documentation", "description": "<p><b>No authentication.</b></p>\n", "version": "1.0.0"}, "schemes": ["https"], "produces": ["application/json"], "paths": {"/audiences/public/api/profiles/{analytics_visitor_id}/audiences/": {"get": {"tags": ["audiences"], "summary": "Get profile audiences", "description": "<p>Returns a list of audiences which the profile belongs to. The only ID that can be used to identify the profile is <code>analytics_visitor_id</code>. In the response, you get only audiences IDs, names are not returned for security reasons.</p>\n", "parameters": [{"name": "website_id", "in": "query", "type": "string", "format": "uuid", "description": "ID of the website.", "required": true, "example": "0fdd8cc2-93b1-428c-8373-97a452f5b10"}, {"name": "analytics_visitor_id", "in": "path", "type": "string", "format": "string", "description": "Piwik ID of the profile.", "required": true, "example": "3a0133748b3e524c"}], "responses": {"200": {"description": "OK", "schema": {"type": "array", "items": {"type": "string", "example": "0fdd8cc2-93b1-428c-8373-97a452f5b10"}}}, "400": {"description": "Bad Request"}, "403": {"description": "Forbidden"}}}}, "/audiences/public/api/profiles/{analytics_visitor_id}/audiences/check/": {"get": {"tags": ["audiences"], "summary": "Check the profile membership in the audience", "description": "<p>Check if the profile is a member of an audience. The only ID that can be used to identify the profile is <code>analytics_visitor_id</code>. You can get the audience ID from the Audience Manager - go to Audiences, select an audience, the ID is listed below the name of an audience.</p>\n", "parameters": [{"name": "website_id", "in": "query", "type": "string", "format": "uuid", "description": "ID of the website.", "required": true, "example": "0fdd8cc2-93b1-428c-8373-97a452f5b10"}, {"name": "audience_id", "in": "query", "type": "string", "format": "uuid", "description": "ID of the audience.", "required": true, "example": "edd3b737-e390-4c14-af21-ce1cdbb572b7"}, {"name": "analytics_visitor_id", "in": "path", "type": "string", "format": "string", "description": "Piwik ID of the profile.", "required": true, "example": "3a0133748b3e524c"}], "responses": {"200": {"description": "OK", "schema": {"$ref": "#/definitions/AudienceMembershipCheck"}}, "400": {"description": "Bad Request"}, "403": {"description": "Forbidden"}}}}, "/audiences/tracker/attributes/": {"post": {"tags": ["attributes"], "summary": "Track attributes", "description": "<p>In order to enrich the profile with more attributes specific to your needs or business requirements, you can use that endpoint to send custom attribute_name-value pairs which will be saved in the profile. It can be anything you wish but remember that values are always saved as a string. For example, you can send a favourite_food attribute to profiles and later on create an audience of people who like Italian food.</p>\n<p>You can send data in batches - multiple profiles in one request and multiple attributes in the profile. All of the data in one batch request should be related to websites that belong to the same organization.</p>\n<p>Each item must have at least one of identifiers (<code>user_id</code> or <code>email</code> or <code>analytics_visitor_id</code> or <code>device_id</code>).</p>\n", "parameters": [{"name": "attributes_data", "in": "body", "required": true, "schema": {"type": "array", "items": {"$ref": "#/definitions/AttributesData"}}}], "responses": {"204": {"description": "No Content"}, "400": {"description": "Bad Request"}, "403": {"description": "Forbidden"}}}}, "/audiences/public/api/profiles/{analytics_visitor_id}/attributes/": {"get": {"tags": ["attributes"], "summary": "Get profile attributes", "description": "<p>Returns a list of attributes for a given profile.</p>\n<p>In order to secure the PII data, no attributes are returned by default. You need to put on the whitelist attributes which you'd like to get in the response. In order to do that, go to Audience Manager, Attributes tab and enable attribute for the public API access. Please use it carefully and wisely, we recommend to not whitelist any attributes which contain PII data.<p>\n", "parameters": [{"name": "website_id", "in": "query", "type": "string", "format": "uuid", "description": "ID of the website.", "required": true, "example": "0fdd8cc2-93b1-428c-8373-97a452f5b10"}, {"name": "analytics_visitor_id", "in": "path", "type": "string", "format": "string", "description": "Piwik ID of the profile.", "required": true, "example": "3a0133748b3e524c"}], "responses": {"200": {"description": "OK", "schema": {"$ref": "#/definitions/Attributes"}}, "400": {"description": "Bad Request"}, "404": {"description": "Not Found"}, "403": {"description": "Forbidden"}}}}}, "definitions": {"AudienceMembershipCheck": {"type": "object", "properties": {"result": {"type": "boolean", "description": "Specifies if a profile is a member of given audience.", "example": false}}}, "AttributesData": {"type": "object", "required": ["website_id", "attributes"], "properties": {"website_id": {"type": "string", "description": "ID of the website.", "example": "0fdd8cc2-93b1-428c-8373-97a452f5b10c"}, "user_id": {"type": "string", "description": "User identifier of the visitor on the website.", "example": "xman"}, "device_id": {"type": "string", "description": "ID of the device.", "example": "39d96a38018f490c"}, "email": {"type": "string", "description": "Email address of the profile.", "example": "john@doe.com"}, "analytics_visitor_id": {"type": "string", "description": "Piwik ID of the visitor.", "example": "39d96a38018f490c"}, "attributes": {"type": "array", "description": "Attributes of the occurred event.", "items": {"type": "object", "properties": {"name": {"type": "object", "description": "Name of the event attribute."}, "value": {"type": "string", "description": "Value of the attribute with specified name."}}, "example": {"name": "occupation", "value": "unicorn"}}}}}, "Attributes": {"type": "array", "items": {"type": "object", "properties": {"name": {"type": "object", "description": "Name of the event attribute.", "example": "name"}, "value": {"type": "string", "description": "Value of the attribute with specified name.", "example": "Amelia"}, "field_type": {"type": "string", "description": "Type of the field.", "enum": ["attributes", "analytics"]}}}}}, "host": "ppms.example.com", "basePath": "/"}
